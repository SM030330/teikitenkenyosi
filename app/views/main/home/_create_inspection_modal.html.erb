<button type="button" class="btn btn-outline-secondary btn-new-inspection mx-2 my-2" data-bs-toggle="modal" data-bs-target="#NewInspectionModal" data-bs-whatever="@mdo">+</button>

<div class="modal fade" id="NewInspectionModal" tabindex="-1" aria-labelledby="NewInspectionModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="NewInspectionModalLabel">予定の新規作成</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <%= form_with(model: @new_inspection, url: main_inspections_path, method: :post, local: false, id: 'inspection-form') do |inspection_form| %>
        <%= render "shared/error_messages", resource: @new_inspection %>
        <div class="modal-body">
          <h5 class="my-3">点検対象</h5>
          <div class="field mb-3">
            <%= inspection_form.label "点検名", class: "col-form-label" %><span> :</span>
            <%= inspection_form.text_field :name, autofocus: true, class: "form-control" %>
          </div>
          <div class="field pb-3 border-bottom border-secondary">          
            <%= inspection_form.label "備考", class: "col-form-label" %><span> :</span>            
            <%= inspection_form.text_area :comment, autofocus: true, class: "form-control" %>
          </div>
          <div id="items">
            <%= inspection_form.fields_for :items do |item_form| %>          
              <%= render "main/home/item_fields", f: item_form %>
            <% end %>
            <div class="d-flex justify-content-end">
              <%= link_to_add_association 'add task', inspection_form, :items, partial: 'main/home/item_fields', class: 'btn btn-outline-primary btn-sm float-end'%>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <%= inspection_form.submit "create", data: { confirm: "保存してもよろしいですか？", disable_with: "保存中" }, class: "btn btn-primary" %>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
